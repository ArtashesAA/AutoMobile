<body>
  <div class="container">
    <div class="row">
      <h2 class="titulo">Gesti贸n de Usuarios</h2>
      <!-- Sidebar -->
      <div class="col-md-2">
        <div class="sidebar">
          <ul class="nav nav-pills flex-column mb-auto">
            <li class="nav-item">
              <a [routerLink]="'/perfil'" class="nav-link link-dark">Perfil</a>
            </li>
            <li>
              <a
                [routerLink]="'/gestionUsuarios'"
                class="nav-link active"
                aria-current="page"
                >Gesti贸n de Usuarios</a
              >
            </li>
            <li class="nav-item">
              <a
                [routerLink]="'/cochesUsuario'"
                class="nav-link link-dark"
                aria-current="page"
              >
                Coches Publicados
              </a>
            </li>
            <li class="nav-item">
              <a
                [routerLink]="'/favoritosUsuario'"
                class="nav-link link-dark"
                aria-current="page"
              >
                Favoritos
              </a>
            </li>
          </ul>
        </div>
      </div>

      <!-- Contenido de Gesti贸n de Usuarios -->
      <div class="col-md-9">
        <table class="table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Imagen</th>
              <th>Nombre de Usuario</th>
              <th>Email</th>
              <th>Rol</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let usuario of usuariosPaginados">
              <td>{{ usuario.id }}</td>
              <td>
                <img
                  [src]="
                    usuario.imagen_usuario
                      ? usuario.imagen_usuario
                      : 'https://images.freeimages.com/fic/images/icons/2526/bloggers/256/admin.png'
                  "
                  alt="Imagen de Usuario"
                  class="avatar"
                />
              </td>
              <td>{{ usuario.nombre_usuario }}</td>
              <td>{{ usuario.email }}</td>
              <td>
                <span *ngIf="usuario.role === 'ADMIN'">Administrador</span>
                <span *ngIf="usuario.role === 'USER'">Usuario</span>
              </td>
              <td>
                <button
                  [routerLink]="['/actualizaUsuario', usuario.id]"
                  class="btn btn-warning"
                >
                  Editar
                </button>
                <br />
                <button
                  (click)="eliminarUsuario(usuario.id)"
                  class="btn btn-danger"
                >
                  Eliminar
                </button>
              </td>
            </tr>
          </tbody>
        </table>

        <!-- Controles de Paginaci贸n -->
        <div *ngIf="usuarios.length > 0" class="paginacion">
          <button
            class="btn"
            (click)="anteriorPag()"
            [disabled]="paginaActual === 1"
          >
            <i class="bi bi-chevron-left"></i>
            Anterior
          </button>
          <span>{{ paginaActual }}</span>
          <button
            class="btn"
            (click)="siguientePag()"
            [disabled]="paginaActual === totalPaginas"
          >
            Siguiente <i class="bi bi-chevron-right"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</body>
