<body>
  <div *ngIf="usuario" class="container">
    <div class="row">
      <h2 class="titulo">Modificar Usuario</h2>
      <div class="col-md-8">
        <form (ngSubmit)="guardarCambios()" #form="ngForm">
          <div class="mb-3">
            <label for="nombreUsuario" class="form-label"
              >Nombre de Usuario</label
            >
            <input
              type="text"
              class="form-control"
              id="nombreUsuario"
              name="nombreUsuario"
              [(ngModel)]="usuario.nombre_usuario"
              required
              pattern="^[a-zA-Z0-9._]{3,10}$"
              #nombreUsuario="ngModel"
            />
            <div
              *ngIf="
                nombreUsuario.invalid &&
                (nombreUsuario.dirty || nombreUsuario.touched)
              "
              class="text-danger"
            >
              El nombre de usuario debe tener entre 3 y 10 caracteres y puede
              incluir letras, números, puntos y guiones bajos.
            </div>
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input
              type="email"
              class="form-control"
              id="email"
              name="email"
              [(ngModel)]="usuario.email"
              required
              pattern="^[a-zA-Z0-9._%+-]{3,}@gmail\.com$"
              #email="ngModel"
            />
            <div
              *ngIf="email.invalid && (email.dirty || email.touched)"
              class="text-danger"
            >
              El email debe tener al menos 3 letras seguido de 'gmail.com'.
            </div>
          </div>
          <div class="mb-3">
            <label for="contrasena" class="form-label">Contraseña</label>
            <div class="input-group">
              <input
                type="password"
                class="form-control"
                id="contrasena"
                name="contrasena"
                [(ngModel)]="nuevaContrasena"
                [disabled]="!editarContrasena"
                pattern="^[a-zA-Z0-9&!._]{4,12}$"
                #contrasena="ngModel"
              />

              <button
                type="button"
                class="btn btn-outline-secondary"
                (click)="toggleEdicionContrasena()"
              >
                {{ editarContrasena ? "Cancelar" : "Modificar" }}
              </button>
              <div
                *ngIf="
                  contrasena.invalid && (contrasena.dirty || contrasena.touched)
                "
                class="text-danger"
              >
                La contraseña debe tener entre 4 y 12 caracteres y puede incluir
                letras, números y los caracteres &!._.
              </div>
            </div>
          </div>
          <div class="botones-modificar">
            <button type="submit" class="boton-guardar btn btn-primary">
              Guardar Cambios
            </button>
            <button
              type="button"
              class="boton-volver btn btn-light"
              (click)="volver()"
            >
              Volver
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</body>
